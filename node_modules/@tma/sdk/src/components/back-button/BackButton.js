import { off } from "../../bridge/events/off.js";
import { on } from "../../bridge/events/on.js";
import { postEvent as defaultPostEvent } from "../../bridge/methods/postEvent.js";
import { EventEmitter } from "../../event-emitter/EventEmitter.js";
import { State } from "../../state/State.js";
import { createSupportsFunc } from "../../supports/createSupportsFunc.js";
/**
 * Class which controls the back button displayed in the header of the Mini App in the Telegram
 * interface. It is mostly used in case, when you want to provide a way to go bach in routing
 * history or "rollback" some action.
 */ export class BackButton {
  postEvent;
  ee;
  state;
  constructor(isVisible, version, postEvent = defaultPostEvent){
    this.postEvent = postEvent;
    this.ee = new EventEmitter();
    this./**
   * Adds event listener.
   * @param event - event name.
   * @param listener - event listener.
   */ on = (event, listener)=>event === 'click' ? on('back_button_pressed', listener) : this.ee.on(event, listener);
    this./**
   * Removes event listener.
   * @param event - event name.
   * @param listener - event listener.
   */ off = (event, listener)=>event === 'click' ? off('back_button_pressed', listener) : this.ee.off(event, listener);
    this.state = new State({
      isVisible
    }, this.ee);
    this.supports = createSupportsFunc(version, {
      show: 'web_app_setup_back_button',
      hide: 'web_app_setup_back_button'
    });
  }
  set isVisible(visible) {
    this.state.set('isVisible', visible);
    this.postEvent('web_app_setup_back_button', {
      is_visible: visible
    });
  }
  /**
   * True if BackButton is currently visible.
   */ get isVisible() {
    return this.state.get('isVisible');
  }
  /**
   * Hides the BackButton.
   */ hide() {
    this.isVisible = false;
  }
  on;
  off;
  /**
   * Shows the BackButton.
   */ show() {
    this.isVisible = true;
  }
  /**
   * Checks if specified method is supported by current component.
   */ supports;
}
//# sourceMappingURL=BackButton.js.map